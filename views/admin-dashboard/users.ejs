<!DOCTYPE html>
<html lang="zxx">

<!-- Mirrored from demo.dashboardpack.com/finance-html/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 11 Oct 2022 10:11:45 GMT -->

<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Admin Dashboard</title>
    <link rel="icon" href="admin-assets/img/logo.png" type="image/png">

    <link rel="stylesheet" href="../admin-assets/css/bootstrap1.min.css" />

    <link rel="stylesheet" href="../admin-assets/vendors/themefy_icon/themify-icons.css" />

    <link rel="stylesheet" href="../admin-assets/vendors/swiper_slider/css/swiper.min.css" />

    <link rel="stylesheet" href="../admin-assets/vendors/select2/css/select2.min.css" />

    <link rel="stylesheet" href="../admin-assets/vendors/niceselect/css/nice-select.css" />

    <link rel="stylesheet" href="../admin-assets/vendors/owl_carousel/css/owl.carousel.css" />

    <link rel="stylesheet" href="../admin-assets/vendors/gijgo/gijgo.min.css" />

    <link rel="stylesheet" href="../admin-assets/vendors/font_awesome/css/all.min.css" />
    <link rel="stylesheet" href="../admin-assets/vendors/tagsinput/tagsinput.css" />

    <link rel="stylesheet" href="../admin-assets/vendors/datatable/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="../admin-assets/vendors/datatable/css/responsive.dataTables.min.css" />
    <link rel="stylesheet" href="../admin-assets/vendors/datatable/css/buttons.dataTables.min.css" />

    <link rel="stylesheet" href="../admin-assets/vendors/text_editor/summernote-bs4.css" />

    <link rel="stylesheet" href="../admin-assets/vendors/morris/morris.css">

    <link rel="stylesheet" href="../admin-assets/vendors/material_icon/material-icons.css" />

    <link rel="stylesheet" href="../admin-assets/css/metisMenu.css">

    <link rel="stylesheet" href="../admin-assets/css/style1.css" />
    <link rel="stylesheet" href="../admin-assets/css/colors/default.css" id="colorSkinCSS">

</head>

<body class="crm_body_bg">

    <!-- Sidebar -->
    <%- include('partials/sidebar.ejs') %>
        <!-- END -->
        <section class="main_content dashboard_part">
            <div class="main_content_iner ">
                <div class="container-fluid plr_30 body_white_bg pt_30">
                    <div class="row justify-content-center">
                        <div class="col-12">
                            <div class="QA_section">
                                <div class="white_box_tittle list_header">
                                    <h4>Users Table</h4>

                                </div>
                                <div class="QA_table ">

                                    <table class="table lms_table_active" id="users_table">
                                        <thead>
                                            <tr>
                                                <th scope="col">ID</th>
                                                <th scope="col">Username</th>
                                                <th scope="col">Email</th>
                                                <th scope="col">Total Balance</th>
                                                <th scope="col">Followers</th>
                                                <th scope="col">Followings</th>
                                                <th scope="col">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="users_table_body">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer_part">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 col-sm-12">
                            <div class="footer_iner text-center">
                                <p>2022 Â© MemDy - All Rights Reserved by<a href="/"> MeemDy</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>



        <!-- <script src="admin-assets/js/jquery1-3.4.1.min.js"></script> -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
            integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <script src="../admin-assets/js/popper1.min.js"></script>

        <script src="../admin-assets/js/bootstrap1.min.js"></script>

        <script src="../admin-assets/js/metisMenu.js"></script>

        <script src="../admin-assets/vendors/count_up/jquery.waypoints.min.js"></script>


        <script src="../admin-assets/vendors/count_up/jquery.counterup.min.js"></script>

        <script src="../admin-assets/vendors/swiper_slider/js/swiper.min.js"></script>

        <script src="../admin-assets/vendors/niceselect/js/jquery.nice-select.min.js"></script>

        <script src="../admin-assets/vendors/owl_carousel/js/owl.carousel.min.js"></script>

        <script src="../admin-assets/vendors/gijgo/gijgo.min.js"></script>

        <script src="../admin-assets/vendors/datatable/js/jquery.dataTables.min.js"></script>
        <script src="../admin-assets/vendors/datatable/js/dataTables.responsive.min.js"></script>
        <script src="../admin-assets/vendors/datatable/js/dataTables.buttons.min.js"></script>
        <script src="../admin-assets/vendors/datatable/js/buttons.flash.min.js"></script>
        <script src="../admin-assets/vendors/datatable/js/jszip.min.js"></script>
        <script src="../admin-assets/vendors/datatable/js/pdfmake.min.js"></script>
        <script src="../admin-assets/vendors/datatable/js/vfs_fonts.js"></script>
        <script src="../admin-assets/vendors/datatable/js/buttons.html5.min.js"></script>
        <script src="../admin-assets/vendors/datatable/js/buttons.print.min.js"></script>

        <script src="../admin-assets/vendors/progressbar/jquery.barfiller.js"></script>

        <script src="../admin-assets/vendors/tagsinput/tagsinput.js"></script>

        <script src="../admin-assets/vendors/text_editor/summernote-bs4.js"></script>

        <script src="../admin-assets/js/custom.js"></script>
        <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script>
            $(document).ready(function () {
                $.get('<%= process.env.APP_URL %>' + "/api/users/all", (data, status) => {
                    if (status === "success") {
                        let rows = "";

                        data.data.forEach((user, index) => {

                            rows += `<tr>
                                        <th scope="row">${index + 1}</th>
                                        <td>${user.username}</td>
                                        <td>${user.email}</td>
                                        <td>Rs. ${user.totalBalance}</td>
                                        <td>${user.followers.length}</td>
                                        <td>${user.followings.length}</td>
                                        <td><button class="btn btn-danger" onClick="deleteUser('${user._id}')">Delete</button></td>
                                    </tr>`
                        });
                        $('#users_table_body').html(rows)
                    }
                })
            })

            function deleteUser(id) {
                $.get('<%= process.env.APP_URL %>' + "/api/users/delete/" + id, (data, status) => {
                    if (status === "success") {
                        Swal.fire({
                            position: 'center',
                            icon: 'success',
                            title: data.message,
                            showConfirmButton: false,
                            timer: 1500
                        })
                        location.reload();
                    }
                })
            }
        </script>

</body>

</html>